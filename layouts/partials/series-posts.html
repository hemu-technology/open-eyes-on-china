{{ if isset .Params "series" }}
  {{ $seriesName := index .Params.series 0 }}
  {{ $related := where .Site.RegularPages "Params.series" "intersect" (slice $seriesName) }}
  <section class="series-posts" aria-label="Posts in this series">
    <h2>Posts in this series</h2>
    <ul class="series-posts-list">
      {{ range sort $related "Date" }}
        <li class="series-card">
          <a class="series-card-link" href="{{ .RelPermalink }}" title="{{ .Title }}">
            {{ with .Params.thumbnail }}<img class="series-card-thumb" src="/{{ . }}" alt="" loading="lazy" />{{ end }}
            <div class="series-card-body">
              <div class="series-card-title" title="{{ .Title }}">{{ .Title }}</div>
              <div class="series-card-meta">
                <span class="series-card-date">{{ .Date.Format "Jan 2, 2006" }}</span>
                {{ with .Params.tags }}
                  {{ $limited := (first 2 .) }}
                  <span class="series-card-tags">{{ delimit $limited ", " }}</span>
                {{ end }}
              </div>
            </div>
          </a>
        </li>
      {{ end }}
    </ul>
  </section>
{{ end }}
